<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AadharJS Playground</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>

    <template id="cross-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current h-6 w-6">
            <path fill="currentColor"
                d="m12 13.4l2.9 2.9q.275.275.7.275t.7-.275t.275-.7t-.275-.7L13.4 12l2.9-2.9q.275-.275.275-.7t-.275-.7t-.7-.275t-.7.275L12 10.6L9.1 7.7q-.275-.275-.7-.275t-.7.275t-.275.7t.275.7l2.9 2.9l-2.9 2.9q-.275.275-.275.7t.275.7t.7.275t.7-.275zm0 8.6q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22" />
        </svg>
    </template>

    <template id="tick-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current h-6 w-6">
            <path fill="currentColor"
                d="m10.6 13.8l-2.15-2.15q-.275-.275-.7-.275t-.7.275t-.275.7t.275.7L9.9 15.9q.3.3.7.3t.7-.3l5.65-5.65q.275-.275.275-.7t-.275-.7t-.7-.275t-.7.275zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22" />
        </svg>
    </template>

    <nav class="bg-gray-800">
        <div class="container mx-auto flex justify-between items-center p-4">
            <h1 class="text-white flex">
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current h-6 w-6 mr-2">
                        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="1.5">
                            <path d="M12.036 12.158s-.986 4.736 4.492 6.993" />
                            <path
                                d="M13.752 20.952c-2.871-1.621-5.086-4.726-4.725-8.127a4.047 4.047 0 0 1 1.737-3.306a2.935 2.935 0 0 1 3.9 1.261c.942 1.388.275 3.179.964 4.641c1.06 1.801 3.75 1.346 4.767-.297c1.526-2.352.715-5.943-.843-8.105c-2.447-3.337-6.043-5.107-11.14-3.338c-4.789 1.632-7.162 8.381-4.64 12.863" />
                            <path
                                d="M7.982 19.002a9 9 0 0 1-1.864-3.484a8.902 8.902 0 0 1-.183-3.933a6.443 6.443 0 0 1 .91-2.45A6.562 6.562 0 0 1 8.662 7.23a6.279 6.279 0 0 1 3.578-.869c.811.025 1.61.208 2.349.537a6.16 6.16 0 0 1 1.96 1.38a8.283 8.283 0 0 1 1.692 5.51" />
                        </g>
                    </svg>
                </span>
                AadharJS
            </h1>
            <div class="flex items-center space-x-4">
                <!-- <a href="https://npmjs.com/package/aadharjs" target="_blank" class="text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6" viewBox="0 0 24 24">
                        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="2" d="M1 8h22v7H11v2H7v-2H1zm6 0v7m7-7v7m3-4v4M4 11v4m7-4v1m9-1v4" />
                    </svg>
                </a> -->
                <a href="https://github.com/xone-labs" target="_blank" class="text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6" viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2" />
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <div class="container mx-auto p-4">

        <h1 class="text-2xl font-bold mb-4">AadharJS Playground</h1>
        <!-- Alert -->
        <div class="bg-blue-100 border-t-4 border-blue-500 rounded text-blue-900 px-4 py-3 shadow-md mb-4" role="alert">
            <div class="flex">
                <div class="py-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-current h-6 w-6 text-blue-500 mr-4"
                        viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M12.3 7.29c.2-.18.44-.29.7-.29c.27 0 .5.11.71.29c.19.21.29.45.29.71c0 .27-.1.5-.29.71c-.21.19-.44.29-.71.29c-.26 0-.5-.1-.7-.29c-.19-.21-.3-.44-.3-.71c0-.26.11-.5.3-.71m-2.5 4.68s2.17-1.72 2.96-1.79c.74-.06.59.79.52 1.23l-.01.06c-.14.53-.31 1.17-.48 1.78c-.38 1.39-.75 2.75-.66 3c.1.34.72-.09 1.17-.39c.06-.04.11-.08.16-.11c0 0 .08-.08.16.03c.02.03.04.06.06.08c.09.14.14.19.02.27l-.04.02c-.22.15-1.16.81-1.54 1.05c-.41.27-1.98 1.17-1.74-.58c.21-1.23.49-2.29.71-3.12c.41-1.5.59-2.18-.33-1.59c-.37.22-.59.36-.72.45c-.11.08-.12.08-.19-.05l-.03-.06l-.05-.08c-.07-.1-.07-.11.03-.2M22 12c0 5.5-4.5 10-10 10S2 17.5 2 12S6.5 2 12 2s10 4.5 10 10m-2 0c0-4.42-3.58-8-8-8s-8 3.58-8 8s3.58 8 8 8s8-3.58 8-8" />
                    </svg>
                </div>
                <div>
                    <p class="font-bold">Note:</p>
                    <p class="text-sm">This is a playground for AadharJS. You can test the library here.</p>
                </div>
            </div>
        </div>
        <div class="grid grid-cols-4 gap-4">
            <div class="mb-4 border border-gray-300 rounded-lg p-4 col-span-3">
                <form id="aadhar-form" class="mb-4">
                    <h2 class="text-xl font-bold mb-2">Decode Aadhar QR Code</h2>
                    <label for="aadhar-qr" class="mb-2 text-sm">Enter Aadhar QR Code</label>
                    <textarea
                        class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:shadow-inner mb-2"
                        cols="30" rows="5" id="aadhar-qr" name="aadhar-qr"
                        placeholder="Enter Aadhar QR Code">2374971804270526477833002468783965837992554564899874087591661303561346432389832047870524302186901344489362368642972767716416349990805756094923115719687656090691368051627957878187788907419297818953295185555346288172578594637886352753543271000481717080003254556962148594350559820352806251787713278744047402230989238559317351232114240089849934148895256488140236015024800731753594740948640957680138566468247224859669467819596919398964809164399637893729212452791889199675715949918925838319591794702333094022248132120531152523331442741730158840977243402215102904932650832502847295644794421419704633765033761284508863534321317394686768650111457751139630853448637215423705157211510636160227953566227527799608082928846103264491539001327407775670834868948113753614112563650255058316849200536533335903554984254814901522086937767458409075617572843449110393213525925388131214952874629655799772119820372255291052673056372346072235458198199995637720424196884145247220163810790179386390283738429482893152518286247124911446073389185062482901364671389605727763080854673156754021728522287806275420847159574631844674460263574901590412679291518508010087116598357407343835408554094619585212373168435612645646129147973594416508676872819776522537778717985070402222824965034768103900739105784663244748432502180989441389718131079445941981681118258324511923246198334046020123727749408128519721102477302359413240175102907322619462289965085963377744024233678337951462006962521823224880199210318367946130004264196899778609815012001799773327514133268825910089483612283510244566484854597156100473055413090101948456959122378865704840756793122956663218517626099291311352417342899623681483097817511136427210593032393600010728324905512596767095096153856032112835755780472808814199620390836980020899858288860556611564167406292139646289142056168261133256777093245980048335918156712295254776487472431445495668303900536289283098315798552328294391152828182614909451410115516297083658174657554955228963550255866282688308751041517464999930825273776417639569977754844191402927594739069037851707477839207593911886893016618794870530622356073909077832279869798641545167528509966656120623184120128052588408742941658045827255866966100249857968956536613250770326334844204927432961924987891433020671754710428050564671868464658436926086493709176888821257183419013229795869757265111599482263223604228286513011751601176504567030118257385997460972803240338899836840030438830725520798480181575861397469056536579877274090338750406459700907704031830137890544492015701251066934352867527112361743047684237105216779177819594030160887368311805926405114938744235859610328064947158936962470654636736991567663705830950312548447653861922078087824048793236971354828540758657075837209006713701763902429652486225300535997260665898927924843608750347193892239342462507130025307878412116604096773706728162016134101751551184021079984480254041743057914746472840768175369369852937574401874295943063507273467384747124843744395375119899278823903202010381949145094804675442110869084589592876721655764753871572233276245590041302887094585204427900634246823674277680009401177473636685542700515621164233992970974893989913447733956146698563285998205950467321954304</textarea>
                    <div class="flex items-center justify-between">
                        <!-- helper text -->
                        <p class="text-sm text-gray-500">Note: This is a sample QR code. You can scan your own QR code.
                        </p>
                        <button type="submit" class="bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600">
                            Decode
                        </button>
                    </div>
                </form>
            </div>
            <div class="mb-4 border border-gray-300 rounded-lg p-4">
                <h2 class="text-xl font-bold mb-2">Aadhar Number Validation</h2>
                <!-- alert info bar -->
                <div class="bg-yellow-100 rounded text-yellow-900 px-4 py-3 shadow-sm mb-4" role="alert">
                    <div class="flex">
                        <p class="text-sm">This will validate the Aadhar number and does not check if the Aadhar number
                            exists.</p>
                    </div>
                </div>
                <label for="aadhar-number" class="mb-2 text-sm">Enter Aadhar Number</label>
                <div class="flex items-center mb-2">
                    <input type="text"
                        class="w-full p-2 border border-gray-300 border-r-0 rounded-l-lg focus:outline-none focus:border-r focus:border-blue-500 focus:shadow-inner"
                        id="aadhar-number" name="aadhar-number" placeholder="Enter Aadhar Number">
                    <div class="text-red-500 p-2 border border-l-0 border-gray-300 rounded-r-lg">
                        <!-- icon -->
                    </div>
                </div>
                <!-- note -->
                <p class="text-sm text-gray-500 mb-2">Note: Type a valid Aadhar number to see the validation status.
                    Status
                    will be shown on the right side of the input field.</p>

            </div>
        </div>

        <div class="mb-4 border border-gray-300 rounded-lg p-4">
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <h2 class="text-xl font-bold mb-2">Decoded Aadhar Details</h2>
                    <!-- output in json -->
                    <pre id="aadhar-details"
                        class="text-sm mb-2 p-2 border border-gray-300 rounded-lg min-h-[150px]">Decoded details will appear here.</pre>
                </div>
                <div>
                    <form id="validate-aadhar-form">
                        <h2 class="text-xl font-bold mb-2">Validate Aadhar Details</h2>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="mobile" class="mb-2 text-sm">Mobile<span id="mobile-na"> (Not available)
                                    </span></label>
                                <div class="flex items-center">
                                    <input type="text" id="mobile" name="mobile" placeholder="Enter Mobile Number"
                                        disabled
                                        class="w-full p-2 border border-gray-300 border-r-0 rounded-l-lg focus:outline-none focus:border-blue-500 focus:border-r focus:shadow-inner">
                                    <div class="text-green-500 p-2 border border-l-0 border-gray-300 rounded-r-lg">
                                        <!-- icon -->
                                    </div>
                                </div>

                            </div>
                            <div>
                                <label for="email" class="mb-2 text-sm">Email<span id="email-na"> (Not available)
                                    </span></label>
                                <div class="flex items-center">
                                    <input type="text" id="email" name="email" disabled placeholder="Enter Email"
                                        class="w-full p-2 border border-gray-300 border-r-0 rounded-l-lg focus:outline-none focus:border-blue-500 focus:border-r focus:shadow-inner">
                                    <div class="text-red-500 p-2 border border-l-0 border-gray-300 rounded-r-lg">
                                        <!-- icon -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <!-- helper text -->
                            <p class="text-sm text-gray-500">Note: This validation is based on the decoded QR &
                                Validates both email & mobile at once.</p>
                            <button id="validate-aadhar-form-button" type="submit"
                                class="bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled>
                                Validate
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto flex items-center justify-between p-4">
            <p class="mt-2">&copy; 2024 AadharJS. All rights reserved.</p>
            <div class="flex items-center justify-center">
                <p>Powered by <a
                        href="https://xubikle.com?utm_source=aadharjs&utm_medium=footer&utm_campaign=playground"
                        target="_blank" class="text-blue-500">Xubikle</a></p>
            </div>
        </div>
    </footer>
    <script type="text/javascript" src="./pako.min.js"></script>
    <script src="./aadhar.min.js"></script>
    <script>
        window.addEventListener('load', function () {
            const tickIcon = document.getElementById('tick-icon').content.cloneNode(true);
            const crossIcon = document.getElementById('cross-icon').content.cloneNode(true);

            const mobileElement = document.getElementById('mobile');
            mobileElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
            mobileElement.nextElementSibling.classList.add('text-red-500')
            mobileElement.addEventListener('input', function (e) {
                mobileElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
                mobileElement.nextElementSibling.classList.add('text-red-500')
            });
            const mobileNaElement = document.getElementById('mobile-na');
            mobileNaElement.style.display = 'none';

            const emailElement = document.getElementById('email');
            emailElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
            emailElement.nextElementSibling.classList.add('text-red-500')
            emailElement.addEventListener('input', function (e) {
                emailElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
                emailElement.nextElementSibling.classList.add('text-red-500')
            });
            const emailNaElement = document.getElementById('email-na');
            emailNaElement.style.display = 'none';

            const outputElement = document.getElementById('aadhar-details');

            const aadharNumberElement = document.getElementById('aadhar-number');
            aadharNumberElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
            aadharNumberElement.addEventListener('input', function (e) {
                const res = AadharJS.Validator.validate(aadharNumberElement.value);
                if (res) {
                    aadharNumberElement.nextElementSibling.replaceChildren(tickIcon.cloneNode(true))
                    aadharNumberElement.nextElementSibling.classList.remove('text-red-500')
                    aadharNumberElement.nextElementSibling.classList.add('text-green-500')
                } else {
                    aadharNumberElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
                    aadharNumberElement.nextElementSibling.classList.remove('text-green-500')
                    aadharNumberElement.nextElementSibling.classList.add('text-red-500')
                }
            });



            let aadhar = null;
            document.getElementById('aadhar-form').addEventListener('submit', function (e) {
                e.preventDefault();
                var aadharQR = document.getElementById('aadhar-qr').value
                aadhar = AadharJS.QR.decode(aadharQR);
                if (!aadhar) {
                    outputElement.innerText = 'Invalid QR Code'
                    return
                }
                const a = Object.assign({}, aadhar);
                // truncate all string values to 50 characters for security reasons and append "..." if string is longer than 100 characters
                for (var key in a) {
                    if (typeof a[key] === 'string') {
                        a[key] = a[key].substring(0, 50) + (a[key].length > 50 ? '...' : '')
                    }
                }
                // skip image data
                delete a.image
                a.image = 'Image data is removed'
                outputElement.innerText = JSON.stringify(a, null, 4);
                let textNode = document.createElement('span');
                textNode.innerText = ' (Not available in QR)';
                if (a.emailHash) {
                    emailNaElement.style.display = 'none';
                    emailElement.removeAttribute('disabled');
                } else {
                    emailNaElement.style.display = 'inline';
                    emailElement.setAttribute('disabled', 'disabled');
                }
                if (a.mobileHash) {
                    mobileNaElement.style.display = 'none';
                    mobileElement.removeAttribute('disabled');
                } else {
                    mobileNaElement.style.display = 'inline';
                    mobileElement.setAttribute('disabled', 'disabled');
                }

                document.getElementById('validate-aadhar-form-button').removeAttribute('disabled');

            });

            document.getElementById('validate-aadhar-form').addEventListener('submit', function (e) {
                e.preventDefault()
                if (!mobileElement || !emailElement || !aadhar) {
                    return
                }
                AadharJS.QR.validateMobileHash(aadhar, mobileElement.value).then(function (result) {
                    if (result) {
                        mobileElement.nextElementSibling.replaceChildren(tickIcon.cloneNode(true))
                        mobileElement.nextElementSibling.classList.remove('text-red-500')
                        mobileElement.nextElementSibling.classList.add('text-green-500')
                    } else {
                        mobileElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
                        mobileElement.nextElementSibling.classList.remove('text-green-500')
                        mobileElement.nextElementSibling.classList.add('text-red-500')
                    }
                });
                AadharJS.QR.validateEmailHash(aadhar, emailElement.value).then(function (result) {
                    if (result) {
                        emailElement.nextElementSibling.replaceChildren(tickIcon.cloneNode(true))
                        emailElement.nextElementSibling.classList.remove('text-red-500')
                        emailElement.nextElementSibling.classList.add('text-green-500')
                    } else {
                        emailElement.nextElementSibling.replaceChildren(crossIcon.cloneNode(true))
                        emailElement.nextElementSibling.classList.remove('text-green-500')
                        emailElement.nextElementSibling.classList.add('text-red-500')
                    }
                });
            });
        });
    </script>
</body>

</html>

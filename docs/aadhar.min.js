!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("pako")):"function"==typeof define&&define.amd?define(["exports","pako"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).AadharJS={},e.pako)}(this,(function(e,t){"use strict";function n(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{d(i.next(e))}catch(e){o(e)}}function a(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}d((i=i.apply(e,t||[])).next())}))}function i(e){return n(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-256",t).then((e=>r(new Uint8Array(e))))}))}function r(e){return Array.prototype.map.call(e,(e=>("00"+e.toString(16)).slice(-2))).join("")}"function"==typeof SuppressedError&&SuppressedError;const o=[255,79],s=["version","mobileEmailLink","referenceId","name","dob","gender","address.co","address.district","address.landmark","address.house","address.location","address.pincode","address.po","address.state","address.street","address.subdist","address.vtc","lastMobile4Digits"];var a=Object.freeze({__proto__:null,decode:function(e){const n=function(e){const n=BigInt(e).toString(16).match(/.{1,2}/g),i=Uint8Array.from(n.map((e=>parseInt(e,16))));return t.inflate(i)}(e);let i=0;const a=n[0];if(86===a)i=parseInt(String.fromCharCode(n[1]));else if(60===a)throw new Error("Invalid QR Code");const d={};let l=-1;if(s.map((e=>{if(2!==i&&-1!==["lastMobile4Digits","version"].indexOf(e))return;const t=n.findIndex(((e,t)=>t>l&&255===e)),r=n.slice(l+1,t),o=String.fromCharCode(...r);if(e.startsWith("address.")){const n=e.split(".")[1];return d.address||(d.address={}),Object.assign(d.address,{[n]:o}),void(l=t)}Object.assign(d,{[e]:o}),l=t})),n.findIndex(((e,t)=>e===o[0]&&n[t+1]===o[1]))){const e=l+1,t=n.length-256-32*Math.max(2!==i?parseInt(d.mobileEmailLink)-1:1,0);if(-1!==e&&-1!==t){const i=n.slice(e,t);d.image=i,l=t-1}}if("3"===d.mobileEmailLink||"2"===d.mobileEmailLink){const e=l+1,t=n.slice(l+1,e+32);d.emailHash=r(t),l=e+32-1}if(("3"===d.mobileEmailLink||"1"===d.mobileEmailLink)&&2!==i){const e=l+1,t=n.slice(e,e+32);d.mobileHash=r(t),l=e+32-1}const c=n.slice(l+1);return d.signature=r(c),d},validateMobileHash:function(e,t){return n(this,void 0,void 0,(function*(){const n=e.referenceId,r=parseInt(n[3]),o=r<2?1:r,s=e.mobileHash;let a=yield i(t);for(let e=1;e<o;e++)a=yield i(a);return s===a}))},validateEmailHash:function(e,t){return n(this,void 0,void 0,(function*(){const n=e.referenceId,r=parseInt(n[3]),o=r<2?1:r,s=e.emailHash;let a=yield i(t);for(let e=1;e<o;e++)a=yield i(a);return s===a}))}});const d=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],l=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]];var c=Object.freeze({__proto__:null,validate:function(e){if(12!==e.length&&16!==e.length)return!1;if(!/^\d+$/.test(e))return!1;if("0"===e[0]||"1"===e[0])return!1;const t=e.split("").map(Number).reverse();let n=0;for(let e=0;e<t.length;e++)n=d[n][l[e%8][t[e]]];return 0===n}});e.QR=a,e.Validator=c}));
